<!DOCTYPE html>
<html lang="en" class="dark" id="html-root">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Linguix - Codenix AI Studio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                    colors: {
                        background: { light: '#FFFFFF', dark: '#000000' },
                        surface: { light: '#FFFFFF', dark: '#000000' },
                        border: { light: '#E5E7EB', dark: '#1A1A1A' },
                        brand: { 500: '#6366f1', 600: '#4f46e5' }
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background-color: #FFFFFF;
            color: #111827;
            -webkit-font-smoothing: antialiased;
            transition: background-color 0.2s, color 0.2s;
        }
        .dark body {
            background-color: #000000;
            color: #FFFFFF;
        }
        .glass-card {
            background-color: #FFFFFF;
            border: 1px solid #E5E7EB;
            backdrop-filter: blur(12px);
        }
        .dark .glass-card {
            background-color: rgba(0, 0, 0, 0.4);
            border: 1px solid #1A1A1A;
        }
        .bg-grid-pattern {
            background-size: 40px 40px;
            background-image: linear-gradient(to right, currentColor 1px, transparent 1px),
                              linear-gradient(to bottom, currentColor 1px, transparent 1px);
            mask-image: radial-gradient(circle at center, black 30%, transparent 90%);
            -webkit-mask-image: radial-gradient(circle at center, black 30%, transparent 90%);
            color: rgba(0,0,0,0.03);
        }
        .dark .bg-grid-pattern {
            color: rgba(255,255,255,0.05);
        }
        .lang-select:focus {
            outline: none;
            border-color: #6366f1;
        }
        .shimmer {
            background: linear-gradient(90deg, transparent, rgba(99, 102, 241, 0.1), transparent);
            background-size: 200% 100%;
            animation: shimmer 2s infinite;
        }
        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }
    </style>
</head>
<body class="min-h-screen flex flex-col relative overflow-x-hidden opacity-0 transition-opacity duration-300" id="main-body">

    <div class="absolute inset-0 bg-grid-pattern pointer-events-none"></div>

    <!-- Header -->
    <nav class="relative z-20 border-b border-border-light dark:border-border-dark bg-white/80 dark:bg-black/80 backdrop-blur-md">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16 items-center">
                <div class="flex items-center gap-4">
                    <a href="portal.html" class="p-2 hover:bg-gray-100 dark:hover:bg-zinc-900 rounded-lg transition-colors">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
                    </a>
                    <div class="flex items-center gap-2">
                        <div class="w-8 h-8 bg-brand-600 rounded-lg flex items-center justify-center text-white font-bold">L</div>
                        <span class="font-bold tracking-tight text-xl dark:text-white uppercase">Linguix <span class="text-brand-600">AI</span></span>
                    </div>
                </div>

                <div class="flex items-center gap-4">
                    <button onclick="window.toggleTheme()" class="p-2 rounded-full border border-gray-200 dark:border-border-dark text-gray-600 dark:text-white hover:text-brand-600 transition-colors">
                        <svg id="theme-icon-dark" class="w-5 h-5 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg>
                        <svg id="theme-icon-light" class="w-5 h-5 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364-6.364l-.707.707M6.343 17.657l-.707.707m12.728 0l-.707-.707M6.343 6.343l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>
                    </button>
                    <div class="w-8 h-8 rounded-full bg-zinc-200 dark:bg-zinc-800 flex items-center justify-center text-xs font-bold border border-border-light dark:border-border-dark overflow-hidden">
                        <span id="user-initials">--</span>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Workspace -->
    <main class="relative z-10 flex-1 max-w-7xl mx-auto w-full px-4 sm:px-6 lg:px-8 py-8 md:py-12">
        
        <div class="mb-8 flex flex-col md:flex-row md:items-end justify-between gap-4">
            <div>
                <h2 class="text-3xl font-extrabold tracking-tight dark:text-white">Neural Translation</h2>
                <p class="text-gray-500 dark:text-zinc-400 mt-2 font-medium">Hyper-accurate localization across 120+ languages.</p>
            </div>
            <div class="flex items-center gap-2">
                <span class="text-xs font-bold uppercase tracking-widest text-zinc-500">Engine Status:</span>
                <span class="flex items-center gap-1.5 px-3 py-1 rounded-full bg-emerald-500/10 text-emerald-500 text-[10px] font-bold border border-emerald-500/20">
                    <span class="w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"></span>
                    ACTIVE
                </span>
            </div>
        </div>

        <!-- Translation Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 items-stretch">
            
            <!-- Input Card -->
            <div class="glass-card rounded-2xl flex flex-col shadow-2xl shadow-black/5 overflow-hidden border-brand-600/20">
                <div class="p-4 border-b border-border-light dark:border-border-dark bg-zinc-50/50 dark:bg-zinc-900/30 flex items-center justify-between">
                    <select id="source-lang" class="bg-transparent text-sm font-bold uppercase tracking-wider text-brand-600 cursor-pointer lang-select">
                        <option value="auto">Detect Language</option>
                        <option value="en" selected>English (US)</option>
                        <option value="fr">French</option>
                        <option value="es">Spanish</option>
                        <option value="de">German</option>
                        <option value="zh">Chinese</option>
                        <option value="ja">Japanese</option>
                    </select>
                    <div class="flex gap-2">
                        <button class="p-2 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-lg text-zinc-400 transition-colors" title="Voice Input">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"></path></svg>
                        </button>
                    </div>
                </div>
                <textarea 
                    id="input-text" 
                    placeholder="Enter text to translate..." 
                    class="flex-1 min-h-[300px] w-full p-6 bg-transparent resize-none focus:outline-none text-lg leading-relaxed dark:text-zinc-200 font-sans"
                ></textarea>
                <div class="p-4 bg-zinc-50/30 dark:bg-zinc-900/20 border-t border-border-light dark:border-border-dark flex justify-between items-center">
                    <span class="text-[10px] font-mono text-zinc-400 uppercase tracking-widest" id="char-count">0 / 5000 characters</span>
                    <button onclick="window.clearText()" class="text-[10px] font-bold text-zinc-500 hover:text-red-500 uppercase tracking-widest transition-colors">Clear All</button>
                </div>
            </div>

            <!-- Output Card -->
            <div class="glass-card rounded-2xl flex flex-col shadow-2xl shadow-brand-600/5 overflow-hidden relative">
                <div id="loading-overlay" class="absolute inset-0 z-20 bg-white/50 dark:bg-black/50 backdrop-blur-[2px] flex items-center justify-center opacity-0 pointer-events-none transition-opacity">
                    <div class="w-12 h-12 border-4 border-brand-600/20 border-t-brand-600 rounded-full animate-spin"></div>
                </div>

                <div class="p-4 border-b border-border-light dark:border-border-dark bg-zinc-50/50 dark:bg-zinc-900/30 flex items-center justify-between">
                    <select id="target-lang" class="bg-transparent text-sm font-bold uppercase tracking-wider text-brand-600 cursor-pointer lang-select">
                        <option value="fr">French</option>
                        <option value="es">Spanish</option>
                        <option value="de">German</option>
                        <option value="zh">Chinese</option>
                        <option value="ja" selected>Japanese</option>
                        <option value="ar">Arabic</option>
                    </select>
                    <div class="flex gap-2">
                        <button onclick="window.speakOutput()" class="p-2 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-lg text-zinc-400 transition-colors" title="Speech Synthesis">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"></path></svg>
                        </button>
                        <button onclick="window.copyOutput()" class="p-2 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-lg text-zinc-400 transition-colors" title="Copy">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"></path></svg>
                        </button>
                    </div>
                </div>
                <div id="output-text" class="flex-1 min-h-[300px] w-full p-6 text-lg leading-relaxed dark:text-zinc-200 font-sans italic opacity-60">
                    Translation will appear here...
                </div>
                <div class="p-4 bg-brand-600/5 dark:bg-brand-600/10 border-t border-border-light dark:border-border-dark flex justify-between items-center">
                    <div class="flex items-center gap-4">
                        <div class="flex flex-col">
                            <span class="text-[9px] font-bold text-zinc-500 uppercase tracking-tighter">Confidence Score</span>
                            <span class="text-xs font-bold text-brand-600">--%</span>
                        </div>
                        <div class="flex flex-col border-l border-zinc-200 dark:border-zinc-800 pl-4">
                            <span class="text-[9px] font-bold text-zinc-500 uppercase tracking-tighter">Dialect</span>
                            <span class="text-xs font-bold text-zinc-700 dark:text-zinc-300">Standard</span>
                        </div>
                    </div>
                    <button class="px-4 py-1.5 bg-brand-600 hover:bg-brand-500 text-white text-[10px] font-bold uppercase tracking-widest rounded-lg transition-all shadow-lg shadow-brand-600/20">
                        Expert Review
                    </button>
                </div>
            </div>

        </div>

        <!-- Labs Section -->
        <div class="mt-12">
            <h3 class="text-sm font-bold uppercase tracking-[0.2em] text-zinc-400 mb-6">Translation Labs</h3>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="glass-card p-6 rounded-2xl hover:border-brand-600/50 transition-colors group">
                    <div class="w-10 h-10 bg-brand-600/10 rounded-xl flex items-center justify-center text-brand-600 mb-4 group-hover:bg-brand-600 group-hover:text-white transition-all">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M3 14h18m-9-4v8m-7 0h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg>
                    </div>
                    <h4 class="font-bold dark:text-white mb-2">Glossary Sync</h4>
                    <p class="text-xs text-zinc-500 leading-relaxed">Ensure brand consistency by uploading custom terminology databases.</p>
                </div>
                <div class="glass-card p-6 rounded-2xl hover:border-brand-600/50 transition-colors group">
                    <div class="w-10 h-10 bg-brand-600/10 rounded-xl flex items-center justify-center text-brand-600 mb-4 group-hover:bg-brand-600 group-hover:text-white transition-all">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"></path></svg>
                    </div>
                    <h4 class="font-bold dark:text-white mb-2">Contextual Chat</h4>
                    <p class="text-xs text-zinc-500 leading-relaxed">Discuss tone and nuance adjustments with the neural engine directly.</p>
                </div>
                <div class="glass-card p-6 rounded-2xl border-dashed border-2 border-zinc-200 dark:border-zinc-800 flex items-center justify-center text-center">
                    <div>
                        <p class="text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2">More Tools Coming</p>
                        <button class="text-xs font-bold text-brand-600 hover:underline">Request Feature</button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        (function() {
            const supabaseUrl = 'https://rnlwrngfgvznndlekmrz.supabase.co';
            const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJubHdybmdmZ3Z6bm5kbGVrbXJ6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYwMzIxODMsImV4cCI6MjA4MTYwODE4M30.4al_pqjZBYgbfoLlMosT500PC85OGsUggCAL-hmtelA';
            const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);

            async function checkAuth() {
                const { data: { session } } = await supabase.auth.getSession();
                if (!session) {
                    window.location.href = 'auth.html';
                } else {
                    document.getElementById('main-body').classList.remove('opacity-0');
                    const user = session.user;
                    const name = user.user_metadata.full_name || user.email.split('@')[0];
                    document.getElementById('user-initials').textContent = name.substring(0, 2).toUpperCase();
                }
            }

            // Translation Logic Mock
            const inputArea = document.getElementById('input-text');
            const outputArea = document.getElementById('output-text');
            const charCount = document.getElementById('char-count');
            const loading = document.getElementById('loading-overlay');

            let translateTimeout;

            inputArea.addEventListener('input', (e) => {
                const text = e.target.value;
                charCount.textContent = `${text.length} / 5000 characters`;
                
                clearTimeout(translateTimeout);
                if(text.trim()) {
                    loading.classList.remove('opacity-0', 'pointer-events-none');
                    translateTimeout = setTimeout(() => {
                        loading.classList.add('opacity-0', 'pointer-events-none');
                        outputArea.textContent = `[Neural Engine Mock]: Translation of "${text.substring(0, 20)}..." in ${document.getElementById('target-lang').value.toUpperCase()} would appear here with context-aware localization.`;
                        outputArea.classList.remove('italic', 'opacity-60');
                    }, 800);
                } else {
                    window.clearText();
                }
            });

            window.clearText = function() {
                inputArea.value = '';
                outputArea.textContent = 'Translation will appear here...';
                outputArea.classList.add('italic', 'opacity-60');
                charCount.textContent = `0 / 5000 characters`;
            };

            window.copyOutput = function() {
                const text = outputArea.textContent;
                const dummy = document.createElement("textarea");
                document.body.appendChild(dummy);
                dummy.value = text;
                dummy.select();
                document.execCommand("copy");
                document.body.removeChild(dummy);
                
                const btn = event.currentTarget;
                const original = btn.innerHTML;
                btn.innerHTML = '<svg class="w-4 h-4 text-emerald-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>';
                setTimeout(() => btn.innerHTML = original, 2000);
            };

            window.toggleTheme = function() {
                const html = document.getElementById('html-root');
                const isDark = html.classList.toggle('dark');
                localStorage.setItem('theme', isDark ? 'dark' : 'light');
                updateThemeIcons(isDark);
            };

            function updateThemeIcons(isDark) {
                document.getElementById('theme-icon-dark').classList.toggle('hidden', isDark);
                document.getElementById('theme-icon-light').classList.toggle('hidden', !isDark);
            }

            const savedTheme = localStorage.getItem('theme') || 'dark';
            document.getElementById('html-root').classList.toggle('dark', savedTheme === 'dark');
            updateThemeIcons(savedTheme === 'dark');

            checkAuth();
        })();
    </script>
</body>
</html>
